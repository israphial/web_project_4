(()=>{"use strict";var e={formSelector:".edit-form",inputSelector:".edit-form__input",submitButtonSelector:".edit-form__save-button",inactiveButtonClass:"edit-form__save-button_disabled",inputErrorClass:"edit-form__input_type_error",errorClass:"edit-form__error_active"},t=document.querySelector(".cards__container"),r=document.querySelector(".profile__edit"),n=document.querySelector(".profile__add"),o=document.querySelector(".profile__edit-avatar-button"),i=(document.querySelector(".popup__close-button_type_profile"),document.querySelector(".popup__close-button_type_add-card"),document.querySelector(".popup__close-button_type_image"),document.querySelector(".popup__close-button_type_edit-avatar"),document.querySelector(".popup__close-button_type_delete-card"),document.querySelector(".edit-form__save-button"),document.querySelector("edit-form__save-button_type_add-card"),document.querySelector(".edit-form__save-button_type_edit-avatar"),document.querySelector(".edit-form__save-button_type_delete-card"),document.querySelector(".popup_type_profile")),a=document.querySelector(".popup_type_add-card"),c=document.querySelector(".popup_type_image"),u=document.querySelector(".popup_type_edit-avatar"),s=document.querySelector(".popup_type_delete-card"),l=document.querySelector(".edit-form_type_profile"),f=document.querySelector(".edit-form__form_type_add-card"),d=document.querySelector(".edit-form__form_type_edit-avatar"),p=document.querySelector(".edit-form__form_type_delete-card"),_=document.querySelector(".profile__header"),h=document.querySelector(".profile__description"),y=document.querySelector(".edit-form__input_type_header"),m=document.querySelector(".edit-form__input_type_description"),v=(document.querySelector(".edit-form__input_type_avatar-url"),document.querySelector(".popup__image"),document.querySelector(".popup__image-caption"),document.querySelector(".edit-form__input_type_title"),document.querySelector(".edit-form__input_type_url"),document.querySelector("#card-template").content),b=document.querySelector(".profile__picture"),k=(document.querySelector(".popup_type_image"),document.querySelector(".popup__image"),document.querySelector(".popup__image-caption"),function(e,t){var r=t.querySelector(".edit-form__save-button"),n=r.textContent,o=r.getAttribute("data-loading-state");if(e)r.textContent=o,r.setAttribute("data-loading-state",n);else{var i=n;r.textContent=o,r.setAttribute("data-loading-state",i)}});function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var S=function(){function e(t,r,n,o,i,a,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=t,this._cardText=t.name,this._cardLink=t.link,this._cardId=t._id,this._ownerId=t.owner._id,this._likes=t.likes,this._currentUserId=r,this._cardSelector=n,this._handleCardClick=o,this._handleCardDelete=i,this._deleteAllowed=a,this._handleCardLike=c}var t,r;return t=e,(r=[{key:"_setDeleteIcon",value:function(){this._deleteAllowed||(this._cardDeleteButton.style.display="none")}},{key:"_hasThisUserLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._currentUserId}))}},{key:"_getTemplate",value:function(){return this._cardSelector.querySelector(".card").cloneNode(!0)}},{key:"_handleHeartClick",value:function(e){this._hasThisUserLiked()?this._handleCardLike(!0):this._handleCardLike(!1)}},{key:"_setEventListeners",value:function(){var e=this;this._setDeleteIcon(),this._deleteAllowed&&this._cardDeleteButton.addEventListener("click",(function(){e._handleCardDelete(e._cardId,e._cardElement)})),this._heartIcon.addEventListener("click",(function(t){e._handleHeartClick(t)})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._cardLink,e._cardText)}))}},{key:"returnCardID",value:function(){return this._cardId}},{key:"updateCardLikes",value:function(e){this._likes=e,this._heartIcon.classList.toggle("card__social-symbol_liked"),this._likesDisplay.textContent=e.length}},{key:"createCard",value:function(){return this._cardElement=this._getTemplate(),this._heartIcon=this._cardElement.querySelector(".card__social-symbol"),this._cardImage=this._cardElement.querySelector(".card__picture"),this._likesDisplay=this._cardElement.querySelector(".card__like-count"),this._cardDeleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardElement.querySelector(".card__name").textContent=this._cardText,this._cardImage.src=this._cardLink,this._cardImage.alt=this._cardText,this._hasThisUserLiked()&&this._heartIcon.classList.add("card__social-symbol_liked"),this._likesDisplay.textContent=this._likes.length,this._setEventListeners(),this._cardElement}}])&&g(t.prototype,r),e}();function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var C=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settings=t,this._formElement=r}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e,t){var r=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._settings.inputErrorClass),r.classList.add(this._settings.errorClass),r.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));t.classList.remove(this._settings.errorClass),t.textContent="",e.classList.remove(this._settings.inputErrorClass)}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.disabled=!0,t.classList.add(this._settings.inactiveButtonClass)):(t.disabled=!1,t.classList.remove(this._settings.inactiveButtonClass))}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_setEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._settings.inputSelector)),r=this._formElement.querySelector(this._settings.submitButtonSelector);this._toggleButtonState(t,r),t.forEach((function(n){n.addEventListener("input",(function(){e._isValid(n),e._toggleButtonState(t,r)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&E(t.prototype,r),e}();function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var O=function(){function e(t,r){var n=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=n,this._renderer=o,this._container=r}var t,r;return t=e,(r=[{key:"renderElements",value:function(){var e=this;this._data.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.append(e)}},{key:"addNewItem",value:function(e){this._container.prepend(e)}}])&&w(t.prototype,r),e}();function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var j=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._handleEscClose=this._handleEscClose.bind(this)}var t,r;return t=e,(r=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._closeButton=this._popupSelector.querySelector(".popup__close-button"),this._closeButton.addEventListener("click",(function(){e.close()})),this._popupSelector.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()}))}},{key:"open",value:function(){this._popupSelector.classList.add("popup_visible"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popupSelector.classList.remove("popup_visible"),document.removeEventListener("keyup",this._handleEscClose)}}])&&L(t.prototype,r),e}();function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t,r){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(n);if(o){var r=R(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return T(this,e)});function a(e,t,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._form=n._popupSelector.querySelector(".edit-form__form"),n._formSubmissionCallback=t,n._formOpenCallback=r,n}return t=a,(r=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._form.querySelectorAll(".edit-form__input"),this._inputValues={},this._inputList.forEach((function(t){e._inputValues[t.name]=t.value})),this._inputValues}},{key:"setEventListeners",value:function(){var e=this;I(R(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._formSubmissionCallback(e._getInputValues())}))}},{key:"close",value:function(){I(R(a.prototype),"close",this).call(this),this._form.reset()}},{key:"open",value:function(){I(R(a.prototype),"open",this).call(this),null!=this._formOpenCallback&&this._formOpenCallback()}}])&&P(t.prototype,r),a}(j);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t,r){return(B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=H(n);if(o){var r=H(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return V(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"open",value:function(e,t){this._popupSelector.querySelector(".popup__image").src=e,this._popupSelector.querySelector(".popup__image-caption").textContent=t,B(H(a.prototype),"open",this).call(this)}}])&&A(t.prototype,r),a}(j);function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var G=function(){function e(t,r,n,o){var i=t.currentUserName,a=t.currentUserOccupation,c=t.avatar,u=t.id;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=i,this._userOccupation=a,this._avatar=c,this._id=u,this._profileHeaderContents=r,this._profileDescriptionContents=n,this._profileAvatar=o}var t,r;return t=e,(r=[{key:"returnUserID",value:function(){return this._id}},{key:"getUserInfo",value:function(){return this._userObj={username:this._userName,occupation:this._userOccupation},this._userObj}},{key:"setUserInfo",value:function(e){var t=e.currentUserName,r=e.currentUserOccupation;this._profileHeaderContents.textContent=t,this._profileDescriptionContents.textContent=r,this._userName=t,this._userOccupation=r}},{key:"setAvatar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._profileAvatar.src=e?e.avatarURL:this._avatar}}])&&z(t.prototype,r),e}();function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var F=function(){function e(t){var r=t.baseUrl,n=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=r,this._headers=n}var t,r;return t=e,(r=[{key:"apiTester",value:function(){fetch(this._baseUrl+"/cards",{method:"GET",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getAllCards",value:function(){return fetch(this._baseUrl+"/cards/",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status," ").concat(e.statusText))}))}},{key:"getUserInfo",value:function(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status," ").concat(e.statusText))}))}},{key:"setUserInfo",value:function(e){var t=e.name,r=e.about;return fetch(this._baseUrl+"/users/me",{headers:this._headers,method:"PATCH",body:JSON.stringify({name:t,about:r})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status," ").concat(e.statusText))}))}},{key:"addNewCard",value:function(e){var t=e.name,r=e.link;return fetch(this._baseUrl+"/cards/",{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:r})}).then((function(e){return e.ok?e.json():Promise.reject("Error, "+e.status)}))}},{key:"deleteCard",value:function(e){return fetch(this._baseUrl+"/cards/"+e,{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Error, "+e.status)}))}},{key:"addCardLike",value:function(e){return fetch(this._baseUrl+"/cards/likes/".concat(e),{headers:this._headers,method:"PUT"}).then((function(e){return e.ok?e.json():Promise.reject("Error, ".concat(e.status))}))}},{key:"removeCardLike",value:function(e){return fetch(this._baseUrl+"/cards/likes/".concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Error, ".concat(e.status))}))}},{key:"updateAvatar",value:function(e){return fetch(this._baseUrl+"/users/me/avatar",{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e.avatarURL})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&M(t.prototype,r),e}();function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function W(e,t,r){return(W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Z(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e,t){return!t||"object"!==K(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Z(n);if(o){var r=Z(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Y(this,e)});function a(e,t,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(o=i.call(this,e))._form=o._popupSelector.querySelector(".edit-form__form"),o._card=r,o._id=n,o._submitCallback=t,o}return t=a,(r=[{key:"_handleSubmit",value:function(e){e.preventDefault(),this._submitCallback(this._id,this._card)}},{key:"open",value:function(e,t){W(Z(a.prototype),"open",this).call(this),this._id=e,this._card=t}},{key:"setEventListeners",value:function(){var e=this;W(Z(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){e._handleSubmit(t)}))}}])&&Q(t.prototype,r),a}(j),ee=function(t){var r=new C(e,t);return r.enableValidation(),r},te=(ee(l),ee(f),ee(d),ee(p),new F({baseUrl:"https://around.nomoreparties.co/v1/group-7",headers:{authorization:"be27dd99-9631-4f9f-ab55-fc3bfe11bfdc","Content-Type":"application/json"}}));Promise.all([te.getUserInfo(),te.getAllCards()]).then((function(e){var g=e[0],E=e[1],C=new J(c);C.setEventListeners();var w=function(e,t){C.open(e,t)},L=new G({currentUserName:g.name,currentUserOccupation:g.about,avatar:g.avatar,id:g._id},_,h,b);L.setUserInfo({currentUserName:g.name,currentUserOccupation:g.about}),L.setAvatar();var j=new D(i,(function(e){k(!0,l),te.setUserInfo({name:e.profileName,about:e.profileDescription}).then((function(){L.setUserInfo({currentUserName:e.profileName,currentUserOccupation:e.profileDescription}),k(!1,l),j.close()})).catch((function(e){return console.log(e)}))}),(function(){var e=L.getUserInfo(),t=e.username,r=e.occupation;y.value=t,m.value=r})),q=new D(u,(function(e){k(!0,d),te.updateAvatar(e).then((function(){k(!1,d),L.setAvatar(e),q.close()})).catch((function(e){return console.log(e)}))}));q.setEventListeners(),o.addEventListener("click",(function(){q.open()})),r.addEventListener("click",(function(){j.open()})),j.setEventListeners();var P=function(e,t){var r=new S(e,U,t,w,I,L.returnUserID()===e.owner._id,(function(t){t?te.removeCardLike(e._id).then((function(e){var t=e.likes;r.updateCardLikes(t)})).catch((function(e){return console.log(e)})):te.addCardLike(e._id).then((function(e){var t=e.likes;r.updateCardLikes(t)})).catch((function(e){return console.log(e)}))}));return r.createCard()},I=function(e,t){x.open(e,t)},U=L.returnUserID(),T=new O({data:E,renderer:function(e){var t=P(e,v);T.addItem(t)}},t);T.renderElements();var R=new D(a,(function(e){k(!0,f),te.addNewCard({name:e.cardTitle,link:e.cardURL}).then((function(e){var t=P(e,v);T.addNewItem(t),k(!1,f),R.close()})).catch((function(e){return console.log(e)}))}),(function(){f.reset()}));n.addEventListener("click",(function(){R.open()})),R.setEventListeners();var x=new $(s,(function(e,t){k(!0,p),te.deleteCard(e).then((function(){k(!1,p),t.remove(),x.close()})).catch((function(e){return console.log(e)}))}));x.setEventListeners()})).catch((function(e){return console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2FuZF81Ly4vc3JjL3V0aWxzL2NvbnN0cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2FuZF81Ly4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfYW5kXzUvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfYW5kXzUvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfYW5kXzUvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfYW5kXzUvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2FuZF81Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2FuZF81Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9hbmRfNS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfYW5kXzUvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9hbmRfNS8uL3NyYy9jb21wb25lbnRzL1BvcHVwRGVsZXRlQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2FuZF81Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbInNldHRpbmdzT2JqZWN0IiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJjYXJkQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwiZWRpdEF2YXRhckJ1dHRvbiIsInByb2ZpbGVQb3B1cEVsZW1lbnQiLCJhZGRDYXJkUG9wdXBFbGVtZW50IiwiaW1hZ2VQb3B1cEVsZW1lbnQiLCJhdmF0YXJQb3B1cEVsZW1lbnQiLCJkZWxldGVDYXJkUG9wdXBFbGVtZW50IiwicHJvZmlsZVBvcHVwRm9ybSIsImFkZENhcmRQb3B1cEZvcm0iLCJhdmF0YXJQb3B1cEZvcm0iLCJkZWxldGVDYXJkUG9wdXBGb3JtIiwicHJvZmlsZUhlYWRlckNvbnRlbnRzIiwicHJvZmlsZURlc2NyaXB0aW9uQ29udGVudHMiLCJpbnB1dEhlYWRlckNvbnRlbnRzIiwiaW5wdXREZXNjcmlwdGlvbkNvbnRlbnRzIiwiY2FyZFRlbXBsYXRlIiwiY29udGVudCIsInByb2ZpbGVBdmF0YXIiLCJyZW5kZXJMb2FkaW5nIiwiaXNMb2FkaW5nIiwiZm9ybUVsZW1lbnQiLCJ0aGlzRm9ybUJ1dHRvbiIsImJ1dHRvblRleHQiLCJ0ZXh0Q29udGVudCIsImxvYWRpbmdCdXR0b25UZXh0IiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiY29udGFpbmVyIiwiQ2FyZCIsImRhdGEiLCJjdXJyZW50VXNlcklkIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQ2FyZERlbGV0ZSIsImlzRGVsZXRlQWxsb3dlZCIsImhhbmRsZUNhcmRMaWtlQ2FsbGJhY2siLCJ0aGlzIiwiX2RhdGEiLCJfY2FyZFRleHQiLCJuYW1lIiwiX2NhcmRMaW5rIiwibGluayIsIl9jYXJkSWQiLCJfaWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX2xpa2VzIiwibGlrZXMiLCJfY3VycmVudFVzZXJJZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUNhcmREZWxldGUiLCJfZGVsZXRlQWxsb3dlZCIsIl9oYW5kbGVDYXJkTGlrZSIsIl9jYXJkRGVsZXRlQnV0dG9uIiwic3R5bGUiLCJkaXNwbGF5Iiwic29tZSIsInRoaXNVc2VyT2JqIiwiY2xvbmVOb2RlIiwiZSIsIl9oYXNUaGlzVXNlckxpa2VkIiwiX3NldERlbGV0ZUljb24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2NhcmRFbGVtZW50IiwiX2hlYXJ0SWNvbiIsIl9oYW5kbGVIZWFydENsaWNrIiwiX2NhcmRJbWFnZSIsIm5ld0xpa2VzQXJyYXkiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfbGlrZXNEaXNwbGF5IiwibGVuZ3RoIiwiX2dldFRlbXBsYXRlIiwic3JjIiwiYWx0IiwiYWRkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiX3NldHRpbmdzIiwiX2Zvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJyZW1vdmUiLCJpbnB1dEVsZW1lbnRMaXN0IiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2lzVmFsaWQiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJlbGVtZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cFNlbGVjdG9yIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImtleSIsImNsb3NlIiwiX2Nsb3NlQnV0dG9uIiwidGFyZ2V0IiwiY29udGFpbnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TdWJtaXNzaW9uQ2FsbGJhY2siLCJmb3JtT3BlbkNhbGxiYWNrIiwiX2Zvcm0iLCJfZm9ybVN1Ym1pc3Npb25DYWxsYmFjayIsIl9mb3JtT3BlbkNhbGxiYWNrIiwiX2lucHV0TGlzdCIsIl9pbnB1dFZhbHVlcyIsImlucHV0RmllbGQiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwidW5kZWZpbmVkIiwiUG9wdXBXaXRoSW1hZ2UiLCJpbWFnZUxpbmsiLCJpbWFnZU5hbWUiLCJVc2VySW5mbyIsImN1cnJlbnRVc2VyTmFtZSIsImN1cnJlbnRVc2VyT2NjdXBhdGlvbiIsImF2YXRhciIsIl91c2VyTmFtZSIsIl91c2VyT2NjdXBhdGlvbiIsIl9hdmF0YXIiLCJfcHJvZmlsZUhlYWRlckNvbnRlbnRzIiwiX3Byb2ZpbGVEZXNjcmlwdGlvbkNvbnRlbnRzIiwiX3Byb2ZpbGVBdmF0YXIiLCJfdXNlck9iaiIsInVzZXJuYW1lIiwib2NjdXBhdGlvbiIsImF2YXRhck9iamVjdCIsImF2YXRhclVSTCIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiYWJvdXQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRJRCIsIlBvcHVwRGVsZXRlQ2FyZCIsInN1Ym1pdENhbGxiYWNrIiwiY2FyZCIsIl9jYXJkIiwiX3N1Ym1pdENhbGxiYWNrIiwiX2hhbmRsZVN1Ym1pdCIsIm1ha2VOZXdWYWxpZGF0b3IiLCJ2YWxpZGF0b3IiLCJjb25zdHMiLCJlbmFibGVWYWxpZGF0aW9uIiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0QWxsQ2FyZHMiLCJ1c2VyUmVzcG9uc2UiLCJjYXJkc1Jlc3BvbnNlIiwiaW1hZ2VQb3B1cENsYXNzIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJvcGVuIiwicHJvZmlsZUluZm8iLCJzZXRVc2VySW5mbyIsInNldEF2YXRhciIsImVkaXRVc2VyRm9ybSIsInByb2ZpbGVPYmplY3QiLCJ1dGlscyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwiZWRpdEF2YXRhclBvcHVwIiwidXBkYXRlQXZhdGFyIiwibWFrZU5ld0NhcmQiLCJyZXR1cm5Vc2VySUQiLCJsaWtlU3RhdHVzIiwicmVtb3ZlQ2FyZExpa2UiLCJ1cGRhdGVDYXJkTGlrZXMiLCJhZGRDYXJkTGlrZSIsImNyZWF0ZUNhcmQiLCJkZWxldGVDYXJkUG9wdXAiLCJpbml0aWFsQ2FyZHMiLCJ0aGlzQ2FyZCIsImFkZEl0ZW0iLCJyZW5kZXJFbGVtZW50cyIsImFkZENhcmRQb3B1cCIsInZhbHVlc1Bhc3NlZEluIiwiYWRkTmV3Q2FyZCIsImNhcmRUaXRsZSIsImNhcmRVUkwiLCJhZGROZXdJdGVtIiwiZGVsZXRlQ2FyZCJdLCJtYXBwaW5ncyI6Im1CQUFPLElBQU1BLEVBQWlCLENBQzFCQyxhQUFjLGFBQ2RDLGNBQWUsb0JBQ2ZDLHFCQUFzQiwwQkFDdEJDLG9CQUFxQixrQ0FDckJDLGdCQUFpQiw4QkFDakJDLFdBQVksMkJBR0hDLEVBQWdCQyxTQUFTQyxjQUFjLHFCQUV2Q0MsRUFBb0JGLFNBQVNDLGNBQWMsa0JBQzNDRSxFQUFnQkgsU0FBU0MsY0FBYyxpQkFDdkNHLEVBQW1CSixTQUFTQyxjQUFjLGdDQWExQ0ksR0FYcUJMLFNBQVNDLGNBQWMscUNBQ3ZCRCxTQUFTQyxjQUFjLHNDQUN6QkQsU0FBU0MsY0FBYyxtQ0FDdEJELFNBQVNDLGNBQWMseUNBQ25CRCxTQUFTQyxjQUFjLHlDQUUzQkQsU0FBU0MsY0FBYywyQkFDdkJELFNBQVNDLGNBQWMsd0NBQ3BCRCxTQUFTQyxjQUFjLDRDQUN2QkQsU0FBU0MsY0FBYyw0Q0FFeEJELFNBQVNDLGNBQWMsd0JBQzdDSyxFQUFzQk4sU0FBU0MsY0FBYyx3QkFDN0NN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TWMsRUFBTytCLEVBQVk3QyxFQUFLb0IsR0FDOUJpQyxFQUFhUyxXQUFXaEQsR0FDeEJ1QixHQUFvQixFQUFPakIsR0FDM0JxQyxFQUFhckcsV0FFZG9GLE9BQU0sU0FBQ3hDLEdBQUQsT0FBU3lDLFFBQVFDLElBQUkxQyxTQUVoQyxXQUVFb0IsYUFJSkEsbUJBQXNDLFNBQVMsV0FDN0NxQyxFQUFhMUIsVUFHZjBCLEVBQWEzQixvQkFFYixJQUFNc0IsRUFBa0IsSUFBSXhDLEVBQzFCUSxHQUNBLFNBQUNsRyxFQUFJNEYsR0FFSHVCLEdBQW9CLEVBQU1qQixHQUMxQkUsR0FDR3lDLFdBQVc3SSxHQUNYNkUsTUFBSyxXQUNKc0MsR0FBb0IsRUFBT2pCLEdBQzNCTixFQUFLM0YsU0FDTGlJLEVBQWdCaEcsV0FFakJvRixPQUFNLFNBQUN4QyxHQUFELE9BQVN5QyxRQUFRQyxJQUFJMUMsU0FJbENvRCxFQUFnQnRCLHVCQUVqQlUsT0FBTSxTQUFDeEMsR0FBRCxPQUFTeUMsUUFBUUMsSUFBSTFDLE8iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzZXR0aW5nc09iamVjdCA9IHtcclxuICAgIGZvcm1TZWxlY3RvcjogXCIuZWRpdC1mb3JtXCIsIC8vIHRoZSBmb3JtIGl0c2VsZlxyXG4gICAgaW5wdXRTZWxlY3RvcjogXCIuZWRpdC1mb3JtX19pbnB1dFwiLCAvLyB0aGUgaW5wdXRzIHdpdGhpbiBcInRoaXNcIiBmb3JtXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZWRpdC1mb3JtX19zYXZlLWJ1dHRvblwiLCAvLyB0aGUgYnV0dG9uIHdpdGhpbiBcInRoaXNcIiBmb3JtXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImVkaXQtZm9ybV9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIiwgLy8gdGhlIGRpc2FibGVkIGNsYXNzIGZvciBcInRoaXNcIiBidXR0b25cclxuICAgIGlucHV0RXJyb3JDbGFzczogXCJlZGl0LWZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIiwgLy8gdGhpcyBjbGFzcyBpcyBhcHBsaWVkIHRvIHRoZSBpbnB1dCB3aGVuIHRoZXJlJ3MgYW4gaW5wdXQgZXJyb3IgLyB0aGUgaW5wdXQgaXMgaW52YWxpZFxyXG4gICAgZXJyb3JDbGFzczogXCJlZGl0LWZvcm1fX2Vycm9yX2FjdGl2ZVwiIC8vIHRoZSBzcGFuIHRoYXQgXCJwb3BzIHVwXCIgZHVyaW5nIGFuIGVycm9yIHN0YXRlXHJcbiAgfTtcclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fY29udGFpbmVyXCIpOyAvL2lzIHVzZWQgYnkgZnVuY3Rpb25zIHRvIGFkZCBjYXJkcyB0byB0aGUgRE9NXHJcblxyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdCcpO1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkXCIpO1xyXG5leHBvcnQgY29uc3QgZWRpdEF2YXRhckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1hdmF0YXItYnV0dG9uXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uX3R5cGVfcHJvZmlsZScpOyBcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uX3R5cGVfYWRkLWNhcmQnKTtcclxuZXhwb3J0IGNvbnN0IGltYWdlQ2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idXR0b25fdHlwZV9pbWFnZVwiKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uX3R5cGVfZWRpdC1hdmF0YXJcIik7XHJcbmV4cG9ydCBjb25zdCBkZWxldGVDYXJkQ2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idXR0b25fdHlwZV9kZWxldGUtY2FyZFwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlU2F2ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWZvcm1fX3NhdmUtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkU2F2ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2VkaXQtZm9ybV9fc2F2ZS1idXR0b25fdHlwZV9hZGQtY2FyZCcpO1xyXG5leHBvcnQgY29uc3QgZWRpdEF2YXRhclNhdmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtZm9ybV9fc2F2ZS1idXR0b25fdHlwZV9lZGl0LWF2YXRhclwiKTtcclxuZXhwb3J0IGNvbnN0IGRlbGV0ZUNhcmRTYXZlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LWZvcm1fX3NhdmUtYnV0dG9uX3R5cGVfZGVsZXRlLWNhcmRcIik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZVBvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX3Byb2ZpbGUnKTsgLy8gcG9wdXAgZm9yIHByb2ZpbGVcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRQb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfYWRkLWNhcmRcIik7IC8vIHBvcHVwIGZvciBhZGQtY2FyZFxyXG5leHBvcnQgY29uc3QgaW1hZ2VQb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfaW1hZ2VcIik7IC8vIHBvcHVwIGZvciBpbWFnZXNcclxuZXhwb3J0IGNvbnN0IGF2YXRhclBvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9lZGl0LWF2YXRhclwiKTtcclxuZXhwb3J0IGNvbnN0IGRlbGV0ZUNhcmRQb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfZGVsZXRlLWNhcmRcIik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZVBvcHVwRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWZvcm1fdHlwZV9wcm9maWxlJyk7XHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkUG9wdXBGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtZm9ybV9fZm9ybV90eXBlX2FkZC1jYXJkJyk7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJQb3B1cEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtZm9ybV9fZm9ybV90eXBlX2VkaXQtYXZhdGFyXCIpO1xyXG5leHBvcnQgY29uc3QgZGVsZXRlQ2FyZFBvcHVwRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1mb3JtX19mb3JtX3R5cGVfZGVsZXRlLWNhcmRcIilcclxuLy8gY29uc3QgYWxsRm9ybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmVkaXQtZm9ybVwiKTsgLy8gdW5jb21tZW50IGlmIG5lZWRlZFxyXG5cclxuLy8gVGhlIHBhcnRzIHRoYXQgc2hvdyB1cCBpbiBwcm9maWxlIHBvcHVwXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSGVhZGVyQ29udGVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faGVhZGVyJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb25Db250ZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19kZXNjcmlwdGlvbicpO1xyXG5cclxuLy8gVGhlIGlucHV0IGJveGVzIG9mIHRoZSBwb3B1cCBmb3JtIC0gdGhlc2UgYXJlIG1hZGUgdG8gbWF0Y2ggdGhlIGNvbnRlbnRzIG9mIHRoZSBwcm9maWxlIHdoZW4gdGhlIGZvcm0gaXMgb3BlbmVkXHJcbmV4cG9ydCBjb25zdCBpbnB1dEhlYWRlckNvbnRlbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtZm9ybV9faW5wdXRfdHlwZV9oZWFkZXInKTtcclxuZXhwb3J0IGNvbnN0IGlucHV0RGVzY3JpcHRpb25Db250ZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LWZvcm1fX2lucHV0X3R5cGVfZGVzY3JpcHRpb24nKTtcclxuXHJcbi8vIHRoZSBpbnB1dCBvZiB0aGUgZWRpdCBhdmF0YXIgZm9ybVxyXG5leHBvcnQgY29uc3QgYXZhdGFySW5wdXRDb250ZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1mb3JtX19pbnB1dF90eXBlX2F2YXRhci11cmxcIik7XHJcblxyXG4vLyBpbWFnZSBwb3B1cCBlbGVtZW50c1xyXG5leHBvcnQgY29uc3QgaW1hZ2VQb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xyXG5leHBvcnQgY29uc3QgaW1hZ2VQb3B1cENhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlLWNhcHRpb24nKTtcclxuXHJcbi8vIHN0b3JhZ2UgZm9yIHdoZW4gdGhlIHVzZXIgYWRkcyBhIG5ldyBjYXJkXHJcbmV4cG9ydCBjb25zdCBjYXJkVGl0bGVTdWJtaXR0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtZm9ybV9faW5wdXRfdHlwZV90aXRsZVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRVUkxTdWJtaXR0ZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtZm9ybV9faW5wdXRfdHlwZV91cmxcIik7XHJcblxyXG4vLyB0aGUgdGVtcGxhdGUgZm9yIGNvbnN0cnVjdGluZyBhIGNhcmRcclxuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BpY3R1cmVcIik7IiwiLy8gY29uc3RhbnRzXHJcbmV4cG9ydCBjb25zdCBpbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2ltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgaW1hZ2VQb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCBpbWFnZVBvcHVwQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfX2ltYWdlLWNhcHRpb25cIlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlbmRlckxvYWRpbmcgPSAoaXNMb2FkaW5nLCBmb3JtRWxlbWVudCkgPT4ge1xyXG4gIGNvbnN0IHRoaXNGb3JtID0gZm9ybUVsZW1lbnQ7XHJcbiAgLy8gZ2V0IGN1cnJlbnQgdGV4dENvbnRlbnQgb2YgdGhlIGN1cnJlbnQgYnV0dG9uOlxyXG4gIGNvbnN0IHRoaXNGb3JtQnV0dG9uID0gdGhpc0Zvcm0ucXVlcnlTZWxlY3RvcihcIi5lZGl0LWZvcm1fX3NhdmUtYnV0dG9uXCIpO1xyXG4gIGNvbnN0IGJ1dHRvblRleHQgPSB0aGlzRm9ybUJ1dHRvbi50ZXh0Q29udGVudDtcclxuICAvLyBjb25zdCBzd2FwQ29udGFpbmVyID0gb3JpZ2luYWxCdXR0b25UZXh0O1xyXG4gIGNvbnN0IGxvYWRpbmdCdXR0b25UZXh0ID0gdGhpc0Zvcm1CdXR0b24uZ2V0QXR0cmlidXRlKFwiZGF0YS1sb2FkaW5nLXN0YXRlXCIpO1xyXG4gIGlmIChpc0xvYWRpbmcpIHtcclxuICAgIC8vIGJ0biBuZWVkcyBsb2FkaW5nIHRleHRcclxuICAgIHRoaXNGb3JtQnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ0J1dHRvblRleHQ7IC8vIG1ha2UgdGhlIGNvbnRlbnQgb2YgdGhlIGJ0biB0byBsb2FkaW5nLi4uXHJcbiAgICB0aGlzRm9ybUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWxvYWRpbmctc3RhdGVcIiwgYnV0dG9uVGV4dCk7IC8vIHN3YXAgdGhlIE9HIGJ0biB0ZXh0IGludG8gdGhlIGRhdGEgY29udGFpbmVyXHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIGJ0biBuZWVkcyBiYXNlIHRleHQsIHdoaWNoIHNob3VsZCBiZSBzdG9yZWQgaW4gdGhlIGRhdGEgcmlnaHQgbm93XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBidXR0b25UZXh0OyAvLyB3aWxsIGhhdmUgdGhlIGxvYWRpbmcuLi4gdGV4dCBpbiBpdFxyXG4gICAgdGhpc0Zvcm1CdXR0b24udGV4dENvbnRlbnQgPSBsb2FkaW5nQnV0dG9uVGV4dDtcclxuICAgIHRoaXNGb3JtQnV0dG9uLnNldEF0dHJpYnV0ZShcImRhdGEtbG9hZGluZy1zdGF0ZVwiLCBjb250YWluZXIpO1xyXG4gIH1cclxufTtcclxuIiwiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZGF0YSxcclxuICAgIGN1cnJlbnRVc2VySWQsXHJcbiAgICBjYXJkU2VsZWN0b3IsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICBoYW5kbGVDYXJkRGVsZXRlLFxyXG4gICAgaXNEZWxldGVBbGxvd2VkLFxyXG4gICAgaGFuZGxlQ2FyZExpa2VDYWxsYmFja1xyXG4gICkge1xyXG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLl9jYXJkVGV4dCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2NhcmRMaW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZElkID0gZGF0YS5faWQ7XHJcbiAgICB0aGlzLl9vd25lcklkID0gZGF0YS5vd25lci5faWQ7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7IC8vIGFycmF5IGNvbnRhaW5pbmcgdGhlIHVzZXIgb2JqZWN0cyB3aG8ndmUgbGlrZWQgdGhpcyBjYXJkXHJcbiAgICB0aGlzLl9jdXJyZW50VXNlcklkID0gY3VycmVudFVzZXJJZDtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUgPSBoYW5kbGVDYXJkRGVsZXRlOyAvLyBjYWxsYmFjayB0aGF0IHVzZXMgdGhlIElEIHRvIGRlbGV0ZSBhIGNhcmQgZnJvbSB0aGUgc2VydmVyIGFuZCBET01cclxuICAgIHRoaXMuX2RlbGV0ZUFsbG93ZWQgPSBpc0RlbGV0ZUFsbG93ZWQ7IC8vIGJvb2xlYW4gfCB0cnVlIGlmIHVzZXIncyBpZCBtYXRjaGVzIGNhcmQgb3duZXIncyBpZCwgZmFsc2UgaWYgbm90OyB1c2VkIHRvIGRldGVybWluZSB3aGljaCBjYXJkcyB0aGUgdXNlciBjYW4gZGVsZXRlXHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSA9IGhhbmRsZUNhcmRMaWtlQ2FsbGJhY2s7IC8vIGxpa2VTdGF0dXMgaW4gaW5kZXggfCByZXR1cm5zIHRydWUgb3IgZmFsc2UgdG8gaW5kZXggfCB0cnVlIGlmIGNhcmQgd2FzIGp1c3QgbGlrZWQsIGZhbHNlIGlmIGNhcmQgd2FzIGp1c3QgdW5saWtlZC5cclxuICB9XHJcblxyXG4gIF9zZXREZWxldGVJY29uKCkge1xyXG4gICAgaWYgKCF0aGlzLl9kZWxldGVBbGxvd2VkKSB7XHJcbiAgICAgIHRoaXMuX2NhcmREZWxldGVCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc1RoaXNVc2VyTGlrZWQoKSB7XHJcbiAgICAvLyByZXR1cm5zIGZhbHNlIGlmIHRoaXMgdXNlciBoYXNuJ3QgYWxyZWFkeSBsaWtlZCB0aGlzIGNhcmRcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKCh0aGlzVXNlck9iaikgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpc1VzZXJPYmouX2lkID09PSB0aGlzLl9jdXJyZW50VXNlcklkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IHRoaXMuX2NhcmRTZWxlY3RvclxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7IC8vIGZpbmlzaGVkIGJsYW5rIGNhcmRcclxuICB9XHJcblxyXG4gIF9oYW5kbGVIZWFydENsaWNrKGUpIHtcclxuICAgIGlmICh0aGlzLl9oYXNUaGlzVXNlckxpa2VkKCkpIHtcclxuICAgICAgLy8gdGhpcyB1c2VyIGhhcyBhbHJlYWR5IGxpa2VkIHRoaXMgY2FyZCwgc28gdGhleSdyZSB0cnlpbmcgdG8gVU5MSUtFIHRoZSBjYXJkIHJpZ2h0IG5vdy4gcmV0dXJuIHRydWUgdG8gdGhlIGluZGV4XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlKHRydWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gdGhpcyB1c2VyIGRpZCBub3QgaGF2ZSB0aGlzIGNhcmQgbGlrZWQsIHNvIHRoaXMgdHJpZ2dlciBpcyB0aGUgdXNlciBsaWtpbmcgdGhlIGNhcmQuIHJldHVybiBmYWxzZSB0byB0aGUgaW5kZXhcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZExpa2UoZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgLy8gZS50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX3NvY2lhbC1zeW1ib2xfbGlrZWRcIik7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9zZXREZWxldGVJY29uKCk7XHJcbiAgICBpZiAodGhpcy5fZGVsZXRlQWxsb3dlZCkge1xyXG4gICAgICB0aGlzLl9jYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSh0aGlzLl9jYXJkSWQsIHRoaXMuX2NhcmRFbGVtZW50KTsgLy8gd2hlbiB0cmFzaCBjbGlja2VkLCBJRCBhbmQgY2FyZCBhcmUgc2VudCBvdXQgdG8gdGhlIGNhbGxiYWNrXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuX2hlYXJ0SWNvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSGVhcnRDbGljayhlKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9jYXJkTGluaywgdGhpcy5fY2FyZFRleHQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBwdWJsaWMgbWV0aG9kc1xyXG4gIC8vLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIHJldHVybkNhcmRJRCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkSWQ7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVDYXJkTGlrZXMobmV3TGlrZXNBcnJheSkge1xyXG4gICAgdGhpcy5fbGlrZXMgPSBuZXdMaWtlc0FycmF5O1xyXG4gICAgdGhpcy5faGVhcnRJY29uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19zb2NpYWwtc3ltYm9sX2xpa2VkXCIpOyAvLyBUT0RPIFRFU1RcclxuICAgIHRoaXMuX2xpa2VzRGlzcGxheS50ZXh0Q29udGVudCA9IG5ld0xpa2VzQXJyYXkubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlQ2FyZCgpIHtcclxuICAgIC8vIG1ha2VzIGEgY2FyZCBmcm9tIHRoZSBkYXRhIGdpdmVuLCBjYWxsZWQgaW4gaW5kZXguanNcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2hlYXJ0SWNvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fc29jaWFsLXN5bWJvbFwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fcGljdHVyZVwiKTsgLy8gZ2V0IHRoZSBpbWFnZSBhbmQgZmlsbCBpdFxyXG4gICAgdGhpcy5fbGlrZXNEaXNwbGF5ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWNvdW50XCIpO1xyXG4gICAgdGhpcy5fY2FyZERlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX25hbWVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkVGV4dDsgLy8gYWRkIHRleHQgdG8gY2FyZFxyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2NhcmRMaW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX2NhcmRUZXh0O1xyXG4gICAgaWYgKHRoaXMuX2hhc1RoaXNVc2VyTGlrZWQoKSkge1xyXG4gICAgICB0aGlzLl9oZWFydEljb24uY2xhc3NMaXN0LmFkZChcImNhcmRfX3NvY2lhbC1zeW1ib2xfbGlrZWRcIik7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9saWtlc0Rpc3BsYXkudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgLy8gcmV0dXJuIHRoZSBmaW5pc2hlZCBjYXJkIGF0IHRoZSBlbmQgb2YgdGhpcyBtZXRob2RcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICAvLyBwcml2YXRlIG1ldGhvZHNcclxuICAvLy0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVsZW1lbnRMaXN0LCBidXR0b25FbGVtZW50KSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0RWxlbWVudExpc3QpKSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRFbGVtZW50TGlzdCkge1xyXG4gICAgcmV0dXJuIGlucHV0RWxlbWVudExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfaXNWYWxpZChpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBpbnB1dEVsZW1lbnRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9zZXR0aW5ncy5pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVsZW1lbnRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuICAgIGlucHV0RWxlbWVudExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVsZW1lbnRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIHB1YmxpYyBtZXRob2RzXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgLy8gcmVuZGVycyBlbGVtZW50cyBvbnRvIHRoZSBwYWdlXHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7IC8vIGl0ZW1zIGlzIGFuIGFycmF5IG9mIG9iamVjdHM7IHRoZSBpbml0aWFsIGNhcmRzIGZvciBleGFtcGxlXHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7IC8vIGlzIHRoZSBjb250YWluZXIgdGhhdCB0aGUgbmV3IGVsZW1lbnRzIHdpbGwgYmUgcmVuZGVyZWQgaW50b1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyRWxlbWVudHMoKSB7XHJcbiAgICB0aGlzLl9kYXRhLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgLy8gZm9yIGVhY2ggY2FyZCBvYmplY3QsXHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pOyAvLyB1c2UgdGhpcy5fcmVuZGVyZXIgb24gaXRcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpOyAvLyBhZGRzIHdoYXRldmVyIGVsZW1lbnQgdG8gd2hhdGV2ZXIgY29udGFpbmVyXHJcbiAgfVxyXG5cclxuICBhZGROZXdJdGVtKGVsZW1lbnQpIHtcclxuICAgIC8vIHVzZWQgdG8gYWRkIG5ldyBjYXJkcyBwcm9wZXJseSB0byB0aGUgRE9NIGFmdGVyIHRoZSBpbml0aWFsIGNhcmRzIGhhdmUgYWxyZWFkeSBsb2FkZWRcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHBvcHVwU2VsZWN0b3I7IC8vIHRoaXMgbmVlZHMgdG8gYmUgdGhlIGRpdiBjb250YWluaW5nIHRoZSBtb2RhbCB3aW5kb3dcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHJpdmF0ZSBtZXRob2RzOlxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIF9oYW5kbGVFc2NDbG9zZShlKSB7XHJcbiAgICAgICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcHVibGljIG1ldGhvZHM6XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgLy8gYWRkIGEgY2xpY2sgZXZlbnQgdG8gdGhlIGNsb3NlIGJ1dHRvbiBvZiB0aGlzIHBvcHVwXHJcbiAgICAgICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKTtcclxuICAgICAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCkgLy8gdGhlICd0aGlzJyBvYmplY3Qgc2hvdWxkIGJlIHRoZSBwb3B1cFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gYWxzbyBhZGQgdGhlIGV2dCBsaXN0ZW5lciB0aGF0IHdhdGNoZXMgZm9yIGEgY2xpY2sgb24gdGhlIG92ZXJsYXkgLSBcclxuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QuYWRkKFwicG9wdXBfdmlzaWJsZVwiKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX3Zpc2libGVcIik7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgZm9ybVN1Ym1pc3Npb25DYWxsYmFjaywgZm9ybU9wZW5DYWxsYmFjaykge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtZm9ybV9fZm9ybVwiKTsgLy8gc2hvdWxkIHNlbGVjdCB0aGUgY3VycmVudC9yZWxldmFudCBmb3JtXHJcbiAgICB0aGlzLl9mb3JtU3VibWlzc2lvbkNhbGxiYWNrID0gZm9ybVN1Ym1pc3Npb25DYWxsYmFjazsgLy8gdGhpcyBnZXRzIHRoZSB2YWx1ZXMgZnJvbSBfZ2V0SW5wdXRWYWx1ZXMgYW5kIHB1bGxzIGl0IHRocm91Z2ggdG8gdGhlIGluZGV4LmpzIHRvIG1ha2UgYSBuZXcgY2FyZFxyXG4gICAgdGhpcy5fZm9ybU9wZW5DYWxsYmFjayA9IGZvcm1PcGVuQ2FsbGJhY2s7IC8vIHRoaXMgcnVucyB3aGVuIHRoZSBmb3JtIGlzIGZpcnN0IG9wZW5lZCwgY2xlYXJzIGZvcm0gYW5kIHN0YXJ0cyBsaXZlIHZhbGlkYXRpb25cclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIC8vIG1ha2VzIGFuIG9iamVjdCB3aXRoIHRoZSB2YWx1ZXMgb2YgdGhlIGlucHV0cyBvZiB0aGUgcmVsZXZhbnQgZm9ybSwgdGhlbiByZXR1cm5zIGl0IG91dCBpbnRvIHRoZSBjYWxsYmFja1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLmVkaXQtZm9ybV9faW5wdXRcIik7IC8vIGdldCB0aGUgaW5wdXRzIG9mIHRoaXMgZm9ybVxyXG4gICAgdGhpcy5faW5wdXRWYWx1ZXMgPSB7fTsgLy8gbmV3IG9iamVjdCB0byBmaWxsIGFuZCByZXR1cm5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEZpZWxkKSA9PiB7XHJcbiAgICAgIHRoaXMuX2lucHV0VmFsdWVzW2lucHV0RmllbGQubmFtZV0gPSBpbnB1dEZpZWxkLnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZXM7IC8vIHRoZSBvYmplY3Qgc2hvdWxkIGJlIGZpbGxlZCB3aXRoIHRoZSBuYW1lOiB2YWx1ZSBwcm9wZXJ0aWVzIGRlcml2ZWQgZnJvbSBhbGwgb2YgdGhlIGZvcm0gaW5wdXRzXHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7IC8vIGFkZHMgZnVuY3Rpb25hbGl0eSB0byB0aGUgY2xvc2UgYnV0dG9uL292ZXJsYXlcclxuICAgIC8vIGFkZCB0aGUgY2xpY2sgZXZ0IGxpc3RlbmVyIHRvIHRoZSBjbG9zZSBpY29uIEFORCBhZGQgdGhlIHN1Ym1pdCBldnQgaGFuZGxlciB0byB0aGUgc3VibWl0IGJ1dHRvblxyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7IC8vIHN0b3AgcmVmcmVzaFxyXG5cclxuICAgICAgLy8gY2FsbCB0byBmb3JtU3VibWlzc2lvbkNhbGxiYWNrXHJcbiAgICAgIHRoaXMuX2Zvcm1TdWJtaXNzaW9uQ2FsbGJhY2sodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7IC8vIHJldHJpZXZlcyB0aGUgY3VycmVudCBpbnB1dCB2YWx1ZXMgYW5kIHBhc3NlcyB0aGVtIGludG8gdGhlIGZvcm1TdWJtaXNzaW9uQ2FsbGJhY2ssIHdoaWNoIGdpdmVzIGluZGV4LmpzIHRoZSB2YWx1ZXNQYXNzZWRJbiBvYmplY3RcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIGlmICh0aGlzLl9mb3JtT3BlbkNhbGxiYWNrICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLl9mb3JtT3BlbkNhbGxiYWNrKCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7IC8vIHJ1biB0aGUgcGFyZW50J3MgY29uc3RydWN0b3IgYW5kIHBhc3MgaW4gcG9wdXBTZWxlY3RvclxyXG4gICAgICAgIC8vIHRoaXMuX3BvcHVwU2VsZWN0b3IgaXMgbm93IGFjY2Vzc2libGUgaW4gdGhpcyBjbGFzc1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oaW1hZ2VMaW5rLCBpbWFnZU5hbWUpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpLnNyYyA9IGltYWdlTGluazsgLy8gc2V0IHRoZSBpbWFnZVxyXG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2UtY2FwdGlvblwiKS50ZXh0Q29udGVudCA9IGltYWdlTmFtZTsgLy8gc2V0IHRoZSBjYXB0aW9uXHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBjdXJyZW50VXNlck5hbWUsIGN1cnJlbnRVc2VyT2NjdXBhdGlvbiwgYXZhdGFyLCBpZCB9LFxyXG4gICAgcHJvZmlsZUhlYWRlckNvbnRlbnRzLFxyXG4gICAgcHJvZmlsZURlc2NyaXB0aW9uQ29udGVudHMsXHJcbiAgICBwcm9maWxlQXZhdGFyXHJcbiAgKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZSA9IGN1cnJlbnRVc2VyTmFtZTsgLy8gdGhlIGNsYXNzIHNlbGVjdG9yIGZvciB0aGUgdXNlciBuYW1lXHJcbiAgICB0aGlzLl91c2VyT2NjdXBhdGlvbiA9IGN1cnJlbnRVc2VyT2NjdXBhdGlvbjsgLy8gdGhlIGNsYXNzIHNlbGVjdG9yIGZvciB0aGUgdXNlciBvY2N1cGF0aW9uXHJcbiAgICB0aGlzLl9hdmF0YXIgPSBhdmF0YXI7XHJcbiAgICB0aGlzLl9pZCA9IGlkO1xyXG4gICAgdGhpcy5fcHJvZmlsZUhlYWRlckNvbnRlbnRzID0gcHJvZmlsZUhlYWRlckNvbnRlbnRzO1xyXG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uQ29udGVudHMgPSBwcm9maWxlRGVzY3JpcHRpb25Db250ZW50cztcclxuICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIgPSBwcm9maWxlQXZhdGFyO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuVXNlcklEKCkge1xyXG4gICAgLy8gdXNlZCB0byBjb21wYXJlIHRoaXMgdXNlcidzIElEIHRvIGEgY2FyZCBvd25lcidzIElEXHJcbiAgICByZXR1cm4gdGhpcy5faWQ7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHRoaXMuX3VzZXJPYmogPSB7XHJcbiAgICAgIHVzZXJuYW1lOiB0aGlzLl91c2VyTmFtZSxcclxuICAgICAgb2NjdXBhdGlvbjogdGhpcy5fdXNlck9jY3VwYXRpb24sXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHRoaXMuX3VzZXJPYmo7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IGN1cnJlbnRVc2VyTmFtZSwgY3VycmVudFVzZXJPY2N1cGF0aW9uIH0pIHtcclxuICAgIC8vIFVwZGF0ZSB0aGUgRE9NXHJcbiAgICB0aGlzLl9wcm9maWxlSGVhZGVyQ29udGVudHMudGV4dENvbnRlbnQgPSBjdXJyZW50VXNlck5hbWU7XHJcbiAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb25Db250ZW50cy50ZXh0Q29udGVudCA9IGN1cnJlbnRVc2VyT2NjdXBhdGlvbjtcclxuICAgIHRoaXMuX3VzZXJOYW1lID0gY3VycmVudFVzZXJOYW1lOyAvLyB1cGRhdGUgdGhlIGludGVybmFsIGNsYXNzIGluZm9ybWF0aW9uIGFzIHdlbGxcclxuICAgIHRoaXMuX3VzZXJPY2N1cGF0aW9uID0gY3VycmVudFVzZXJPY2N1cGF0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2V0QXZhdGFyKGF2YXRhck9iamVjdCA9IGZhbHNlKSB7XHJcbiAgICBpZiAoYXZhdGFyT2JqZWN0KSB7XHJcbiAgICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gYXZhdGFyT2JqZWN0LmF2YXRhclVSTDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Byb2ZpbGVBdmF0YXIuc3JjID0gdGhpcy5fYXZhdGFyO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgYXBpVGVzdGVyKCkge1xyXG4gICAgZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzXCIsIHtcclxuICAgICAgLy8gZmV0Y2hpbmcgY2FyZHMgaW5mb3JtYXRpb24sIGZvciBleGFtcGxlXHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycywgLy8gaGVhZGVycyBBTFdBWVMgbmVlZHMgdG8gYmUgc2V0XHJcbiAgICB9KS50aGVuKChyZXMpID0+XHJcbiAgICAgIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGdldEFsbENhcmRzKCkge1xyXG4gICAgLy8gcmV0cmlldmVzIGFsbCBjYXJkIG9iamVjdHMgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAgLy8gcmV0dXJucyB0aGUgcmVzdWx0IG9mIGEgZmV0Y2goKSBjYWxsIHRoYXQgcHJvZHVjZXMgRUlUSEVSIHRoZSByZXMuanNvbigpIE9SIHNlbmRzIGEgUHJvbWlzZS5yZWplY3QoZXJyKSB0byBhIC5jYXRjaCgpLCB3aGljaCBjb25zb2xlIGxvZ3MgdGhlIGVycm9yLlxyXG4gICAgLy8gdGhpcyB3aWxsIGJlIGNhbGxlZCBpbiBpbmRleC5qcyBpbiB0aGUgaW5pdGlhbGl6YXRpb24gb2YgdGhlIGluaXRpYWxDYXJkcyBTZWN0aW9uIGNsYXNzLCB3aGVyZSB5b3Ugd2lsbCByZXBsYWNlIHRoZSBvbGQgY2FyZHMgYXJyYXkgd2l0aCB0aGUgYXJyYXkgdGhhdCB0aGlzIG1ldGhvZCByZXR1cm5zLlxyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi9jYXJkcy9cIiwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PlxyXG4gICAgICByZXMub2tcclxuICAgICAgICA/IHJlcy5qc29uKClcclxuICAgICAgICA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfSAke3Jlcy5zdGF0dXNUZXh0fWApXHJcbiAgICApOyAvLyBvbiByZXNvbHZlLCByZXR1cm5zIGFuIG9iamVjdCBvZiBjYXJkIG9iamVjdHNcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgLy8gcmV0cmlldmVzIHVzZXIgaW5mbyBmcm9tIHNlcnZlciBhbmQgcmV0dXJucyBpdCB0byBpbmRleC5qcydzIGluaXQgZm9yIHByb2ZpbGVJbmZvIChuZXcgVXNlckluZm8pLlxyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi91c2Vycy9tZVwiLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+XHJcbiAgICAgIHJlcy5va1xyXG4gICAgICAgID8gcmVzLmpzb24oKVxyXG4gICAgICAgIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9YClcclxuICAgICk7IC8vIHNlbmQgdXNlciBpbmZvIG91dCBpbnRvIHRoZSBjYWxsYmFjayB0byBwcm9wYWdhdGUgdXNlciBpbmZvXHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIC8vIFBBVENIIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXBJZC91c2Vycy9tZVxyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyBcIi91c2Vycy9tZVwiLCB7XHJcbiAgICAgIC8vIHNlbmQgbmV3IHVzZXIgaW5mbyB0byBzZXJ2ZXJcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dCxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKChyZXMpID0+XHJcbiAgICAgIHJlcy5va1xyXG4gICAgICAgID8gcmVzLmpzb24oKVxyXG4gICAgICAgIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9ICR7cmVzLnN0YXR1c1RleHR9YClcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBhZGROZXdDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICAvLyB0aGlzIGlzIHVzZWQgd2hlbiBhIG5ldyBjYXJkIGlzIGFkZGVkLiByZXR1cm5zIGEgZmV0Y2ggdGhhdCBQT1NUUyBhIEpTT04uc3RyaW5naWZpZWQoKSBjYXJkIG9iamVjdC5cclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvY2FyZHMvXCIsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsIC8vIHB1bGxzIHRoZSBuYW1lIGZyb20gdGhlIGRlY29uJ2Qgb2JqZWN0IGFuZCBwYXNzZXMgaXQgaW4gdG8gdGhpcyBvYmplY3RcclxuICAgICAgICBsaW5rLCAvLyBeIHNhbWUgd2l0aCBsaW5rXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PlxyXG4gICAgICByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoXCJFcnJvciwgXCIgKyByZXMuc3RhdHVzKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElEKSB7XHJcbiAgICAvLyBjYXJkSUQgaXMgcmV0cmlldmVkIGZyb20gdGhlIGNhcmQgb2JqZWN0XHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzL1wiICsgY2FyZElELCB7XHJcbiAgICAgIC8vIGFkZCB0aGUgY2FyZElEIHRvIHRoZSBlbmQgb2YgdGhlIHVybCB0byBzcGVjaWZ5IHdoaWNoIGNhcmQgdG8gZGVsZXRlXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgIH0pLnRoZW4oKHJlcykgPT5cclxuICAgICAgcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KFwiRXJyb3IsIFwiICsgcmVzLnN0YXR1cylcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkTGlrZShjYXJkSUQpIHtcclxuICAgIC8vIFBVVCBodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwSWQvY2FyZHMvbGlrZXMvY2FyZElkIHdoZXJlIGNhcmRJZCBpcyB0aGUgY2FyZElEXHJcbiAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIGAvY2FyZHMvbGlrZXMvJHtjYXJkSUR9YCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICB9KS50aGVuKChyZXMpID0+XHJcbiAgICAgIHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3IsICR7cmVzLnN0YXR1c31gKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUNhcmRMaWtlKGNhcmRJRCkge1xyXG4gICAgLy8gREVMRVRFIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXBJZC9jYXJkcy9saWtlcy9jYXJkSWQgd2hlcmUgY2FyZElkIGlzIHRoZSBjYXJkSURcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgYC9jYXJkcy9saWtlcy8ke2NhcmRJRH1gLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgIH0pLnRoZW4oKHJlcykgPT5cclxuICAgICAgcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvciwgJHtyZXMuc3RhdHVzfWApXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlQXZhdGFyKGxpbmspIHtcclxuICAgIC8vIFBBVENIIGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXBJZC91c2Vycy9tZS9hdmF0YXJcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvdXNlcnMvbWUvYXZhdGFyXCIsIHtcclxuICAgICAgLy8gZmV0Y2hpbmcgY2FyZHMgaW5mb3JtYXRpb24sIGZvciBleGFtcGxlXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsIC8vIGhlYWRlcnMgQUxXQVlTIG5lZWRzIHRvIGJlIHNldFxyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogbGluay5hdmF0YXJVUkwsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PlxyXG4gICAgICByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YClcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwRGVsZXRlQ2FyZCBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXRDYWxsYmFjaywgY2FyZCwgaWQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcihcIi5lZGl0LWZvcm1fX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9jYXJkID0gY2FyZDtcclxuICAgIHRoaXMuX2lkID0gaWQ7XHJcbiAgICB0aGlzLl9zdWJtaXRDYWxsYmFjayA9IHN1Ym1pdENhbGxiYWNrO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZVN1Ym1pdChldnQpIHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOyAvKiBkb24ndCByZWZyZXNoIHBhZ2Ugb24gc3VibWl0IGV2dCArXHJcbiAgICAgICAgbmVlZHMgdG8gcmV0dXJuIHRoZSBjYXJkJ3MgaW5mbyBiYWNrIG91dCB0byB0aGUgaW5kZXgncyBjYWxsYmFjayAgKi9cclxuICAgIHRoaXMuX3N1Ym1pdENhbGxiYWNrKHRoaXMuX2lkLCB0aGlzLl9jYXJkKTtcclxuICB9XHJcblxyXG4gIG9wZW4oaWQsIGNhcmQpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2lkID0gaWQ7XHJcbiAgICB0aGlzLl9jYXJkID0gY2FyZDtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIC8vIG5lZWRzIHRvIHNldCB1cCBzdWJtaXQgZXZlbnQgbGlzdGVuZXJcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdChldnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsIi8vIGltcG9ydHNcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCAqIGFzIGNvbnN0cyBmcm9tIFwiLi4vdXRpbHMvY29uc3RzLmpzXCI7XHJcbmltcG9ydCAqIGFzIHV0aWxzIGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cERlbGV0ZUNhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cERlbGV0ZUNhcmRcIjtcclxuXHJcbi8vIGltcG9ydCB7IGRhdGEgfSBmcm9tIFwiYXV0b3ByZWZpeGVyXCI7XHJcblxyXG4vLyBoZWxwZXIgZnVuY3Rpb25zOlxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbmNvbnN0IG1ha2VOZXdWYWxpZGF0b3IgPSAoZm9ybUVsZW1lbnQpID0+IHtcclxuICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25zdHMuc2V0dGluZ3NPYmplY3QsIGZvcm1FbGVtZW50KTtcclxuICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIHJldHVybiB2YWxpZGF0b3I7XHJcbn07XHJcblxyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbi8vIGluaXQgdGhlIHZhbGlkYXRvcnMgZm9yIGVhY2ggZm9ybVxyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBtYWtlTmV3VmFsaWRhdG9yKGNvbnN0cy5wcm9maWxlUG9wdXBGb3JtKTtcclxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBtYWtlTmV3VmFsaWRhdG9yKGNvbnN0cy5hZGRDYXJkUG9wdXBGb3JtKTtcclxuY29uc3QgZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IgPSBtYWtlTmV3VmFsaWRhdG9yKGNvbnN0cy5hdmF0YXJQb3B1cEZvcm0pO1xyXG5jb25zdCBkZWxldGVDYXJkRm9ybVZhbGlkYXRvciA9IG1ha2VOZXdWYWxpZGF0b3IoY29uc3RzLmRlbGV0ZUNhcmRQb3B1cEZvcm0pO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTdcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImJlMjdkZDk5LTk2MzEtNGY5Zi1hYjU1LWZjM2JmZTExYmZkY1wiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRBbGxDYXJkcygpXSlcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICBjb25zdCB1c2VyUmVzcG9uc2UgPSByZXNbMF07XHJcbiAgICBjb25zdCBjYXJkc1Jlc3BvbnNlID0gcmVzWzFdO1xyXG5cclxuICAgIC8vIGluaXRpYXRpb25zXHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gICAgLy8gaW5pdCBpbWFnZVBvcHVwQ2xhc3M6XHJcbiAgICBjb25zdCBpbWFnZVBvcHVwQ2xhc3MgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoY29uc3RzLmltYWdlUG9wdXBFbGVtZW50KTtcclxuXHJcbiAgICBpbWFnZVBvcHVwQ2xhc3Muc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICBjb25zdCBoYW5kbGVDYXJkQ2xpY2sgPSAoaW1hZ2VMaW5rLCBpbWFnZU5hbWUpID0+IHtcclxuICAgICAgaW1hZ2VQb3B1cENsYXNzLm9wZW4oaW1hZ2VMaW5rLCBpbWFnZU5hbWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyB1c2VyIHNlY3Rpb25cclxuXHJcbiAgICBjb25zdCBwcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyhcclxuICAgICAge1xyXG4gICAgICAgIGN1cnJlbnRVc2VyTmFtZTogdXNlclJlc3BvbnNlLm5hbWUsXHJcbiAgICAgICAgY3VycmVudFVzZXJPY2N1cGF0aW9uOiB1c2VyUmVzcG9uc2UuYWJvdXQsXHJcbiAgICAgICAgYXZhdGFyOiB1c2VyUmVzcG9uc2UuYXZhdGFyLFxyXG4gICAgICAgIGlkOiB1c2VyUmVzcG9uc2UuX2lkLFxyXG4gICAgICB9LFxyXG4gICAgICBjb25zdHMucHJvZmlsZUhlYWRlckNvbnRlbnRzLFxyXG4gICAgICBjb25zdHMucHJvZmlsZURlc2NyaXB0aW9uQ29udGVudHMsXHJcbiAgICAgIGNvbnN0cy5wcm9maWxlQXZhdGFyXHJcbiAgICApOyAvLyBpbnN0YW50aWF0ZSB0aGUgdXNlckluZm8gY2xhc3Mgc28gdGhhdCBJIGNhbiB1c2UgaXRzIHNldFVzZXJJbmZvKCkgYW5kIGdldFVzZXJJbmZvKCkgbWV0aG9kc1xyXG4gICAgcHJvZmlsZUluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBjdXJyZW50VXNlck5hbWU6IHVzZXJSZXNwb25zZS5uYW1lLFxyXG4gICAgICBjdXJyZW50VXNlck9jY3VwYXRpb246IHVzZXJSZXNwb25zZS5hYm91dCxcclxuICAgIH0pOyAvLyBzZXQgZmV0Y2hlZCBwcm9maWxlIGluZm8gdG8gdGhlIERPTVxyXG4gICAgcHJvZmlsZUluZm8uc2V0QXZhdGFyKCk7XHJcblxyXG4gICAgY29uc3QgZWRpdFVzZXJGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgICAgIGNvbnN0cy5wcm9maWxlUG9wdXBFbGVtZW50LCAvLyBwYXNzIGluIHByb2ZpbGUgcG9wdXAgZWxlbWVudCB0byBiZSBvcGVuZWRcclxuICAgICAgKHByb2ZpbGVPYmplY3QpID0+IHtcclxuICAgICAgICAvLyBjYWxsYmFjayAxIC0gZG8gdGhpcyB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZCB8fCB0aGUgcHJvZmlsZU9iamVjdCBpcyByZXR1cm5lZCBieSBnZXRVc2VySW5mbygpXHJcbiAgICAgICAgdXRpbHMucmVuZGVyTG9hZGluZyh0cnVlLCBjb25zdHMucHJvZmlsZVBvcHVwRm9ybSk7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAuc2V0VXNlckluZm8oe1xyXG4gICAgICAgICAgICBuYW1lOiBwcm9maWxlT2JqZWN0LnByb2ZpbGVOYW1lLFxyXG4gICAgICAgICAgICBhYm91dDogcHJvZmlsZU9iamVjdC5wcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBwcm9maWxlSW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgICAgICAgICAgY3VycmVudFVzZXJOYW1lOiBwcm9maWxlT2JqZWN0LnByb2ZpbGVOYW1lLFxyXG4gICAgICAgICAgICAgIGN1cnJlbnRVc2VyT2NjdXBhdGlvbjogcHJvZmlsZU9iamVjdC5wcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB1dGlscy5yZW5kZXJMb2FkaW5nKGZhbHNlLCBjb25zdHMucHJvZmlsZVBvcHVwRm9ybSk7XHJcbiAgICAgICAgICAgIGVkaXRVc2VyRm9ybS5jbG9zZSgpOyAvLyBjbG9zZXMgcG9wdXAgYW5kIHJlc2V0cyBmb3JtXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChyZXMpID0+IGNvbnNvbGUubG9nKHJlcykpO1xyXG4gICAgICB9LFxyXG4gICAgICAoKSA9PiB7XHJcbiAgICAgICAgLy8gY2FsbGJhY2sgMiB8IF9mb3JtT3BlbkNhbGxiYWNrIC0gd2hlbiB0aGUgZm9ybSBpcyBvcGVuZWRcclxuICAgICAgICBjb25zdCB7IHVzZXJuYW1lLCBvY2N1cGF0aW9uIH0gPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpOyAvLyBnZXQgdGhlIGV4aXN0aW5nIHVzZXIgaW5mbyB0byBmaWxsIHRoZSBmb3JtIGlucHV0cyB3aGVuIHByb2ZpbGUgZWRpdCBmb3JtIGlzIG9wZW5lZFxyXG4gICAgICAgIGNvbnN0cy5pbnB1dEhlYWRlckNvbnRlbnRzLnZhbHVlID0gdXNlcm5hbWU7XHJcbiAgICAgICAgY29uc3RzLmlucHV0RGVzY3JpcHRpb25Db250ZW50cy52YWx1ZSA9IG9jY3VwYXRpb247XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgZWRpdEF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgICAgIGNvbnN0cy5hdmF0YXJQb3B1cEVsZW1lbnQsXHJcbiAgICAgIChhdmF0YXJPYmplY3QpID0+IHtcclxuICAgICAgICAvLyBjYiAxIHwgd2hlbiBmb3JtIGlzIHN1Ym1pdHRlZCwgbmVlZHMgdG8gZ2V0IHRoZSBpbnB1dCwgcG9zdCB0aGUgaW5wdXQgdG8gc2VydmVyLCBhbmQgdXBkYXRlIHRoZSBhdmF0YXIgaW1hZ2VcclxuICAgICAgICB1dGlscy5yZW5kZXJMb2FkaW5nKHRydWUsIGNvbnN0cy5hdmF0YXJQb3B1cEZvcm0pO1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLnVwZGF0ZUF2YXRhcihhdmF0YXJPYmplY3QpXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHV0aWxzLnJlbmRlckxvYWRpbmcoZmFsc2UsIGNvbnN0cy5hdmF0YXJQb3B1cEZvcm0pO1xyXG4gICAgICAgICAgICBwcm9maWxlSW5mby5zZXRBdmF0YXIoYXZhdGFyT2JqZWN0KTtcclxuICAgICAgICAgICAgZWRpdEF2YXRhclBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChyZXMpID0+IGNvbnNvbGUubG9nKHJlcykpO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG4gICAgZWRpdEF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgY29uc3RzLmVkaXRBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgZWRpdEF2YXRhclBvcHVwLm9wZW4oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0cy5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBlZGl0VXNlckZvcm0ub3BlbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZWRpdFVzZXJGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgY29uc3QgbWFrZU5ld0NhcmQgPSAoZGF0YSwgY2FyZFRlbXBsYXRlKSA9PiB7XHJcbiAgICAgIGNvbnN0IGlkQ29tcGFyZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGhpc1VzZXJJZCA9IHByb2ZpbGVJbmZvLnJldHVyblVzZXJJRCgpO1xyXG4gICAgICAgIC8vIHVzZWQgdG8gY29tcGFyZSBjYXJkIG93bmVyJ3MgSUQgdG8gdGhlIGN1cnJlbnQgbG9nZ2VkIGluIHVzZXIncyBJRCB0byBkZXRlcm1pbmUgaWYgY2FyZCBpcyBkZWxldGUtYWJsZSBieSB0aGlzIHVzZXJcclxuICAgICAgICByZXR1cm4gdGhpc1VzZXJJZCA9PT0gZGF0YS5vd25lci5faWQ7IC8vIHRoYW5rcyBmb3IgdGhlIHN1Z2dlc3Rpb24gb24gc2ltcGxpZnlpbmcgdGhpcyBBeWd1bFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBjdXJyZW50VXNlcklkLFxyXG4gICAgICAgIGNhcmRUZW1wbGF0ZSxcclxuICAgICAgICBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICAgICAgaGFuZGxlQ2FyZERlbGV0ZSxcclxuICAgICAgICBpZENvbXBhcmVyKCksIC8vIHRlbGxzIHRoZSBjYXJkIHRydWUgaWYgdGhpcyBjYXJkIGlzIG93bmVkIGJ5IHRoZSBjdXJyZW50IHVzZXIsIGZhbHNlIGlmIGl0J3Mgbm90IG93bmVkIGJ5IHRoZSBjdXJyZW50IHVzZXJcclxuICAgICAgICAobGlrZVN0YXR1cykgPT4ge1xyXG4gICAgICAgICAgLy8gY2IgfCByZXR1cm5zIHRydWUgaWYgdXNlciBpcyB0cnlpbmcgdG8gYmUgdW5saWtlLCBmYWxzZSBpZiB1c2VyIGlzIHRyeWluZyB0byBsaWtlXHJcbiAgICAgICAgICBpZiAobGlrZVN0YXR1cykge1xyXG4gICAgICAgICAgICAvLyBpZiBsaWtlU3RhdHVzIGlzIHRydWUsIHRoZSB1c2VyIGhhcyBwcmV2aW91c2x5IGxpa2VkIHRoZSBjYXJkIHNvIHRoZXkncmUgdHJ5aW5nIHRvIHVubGlrZSB0aGUgY2FyZC5cclxuICAgICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgICAgLnJlbW92ZUNhcmRMaWtlKGRhdGEuX2lkKVxyXG4gICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0xpa2VzQXJyYXkgPSByZXMubGlrZXM7XHJcbiAgICAgICAgICAgICAgICBjYXJkLnVwZGF0ZUNhcmRMaWtlcyhuZXdMaWtlc0FycmF5KTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaCgocmVzKSA9PiBjb25zb2xlLmxvZyhyZXMpKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGxpa2VTdGF0dXMgaXMgZmFsc2UsIHNvIHRoZXkgaGF2ZW4ndCBhbHJlYWR5IGxpa2VkIHRoZSBjYXJkIGFuZCB0aGV5J3JlIHRyeWluZyB0byBsaWtlIHRoZSBjYXJkIG5vdy5cclxuICAgICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgICAgLmFkZENhcmRMaWtlKGRhdGEuX2lkKVxyXG4gICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0xpa2VzQXJyYXkgPSByZXMubGlrZXM7XHJcbiAgICAgICAgICAgICAgICBjYXJkLnVwZGF0ZUNhcmRMaWtlcyhuZXdMaWtlc0FycmF5KTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaCgocmVzKSA9PiBjb25zb2xlLmxvZyhyZXMpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGZpbmlzaGVkQ2FyZCA9IGNhcmQuY3JlYXRlQ2FyZCgpO1xyXG4gICAgICByZXR1cm4gZmluaXNoZWRDYXJkO1xyXG4gICAgfTsgLy8gZW5kIGNvbnN0IG1ha2VOZXdDYXJkXHJcblxyXG4gICAgY29uc3QgaGFuZGxlQ2FyZERlbGV0ZSA9IChjYXJkSUQsIGNhcmQpID0+IHtcclxuICAgICAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oY2FyZElELCBjYXJkKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgY3VycmVudFVzZXJJZCA9IHByb2ZpbGVJbmZvLnJldHVyblVzZXJJRCgpO1xyXG5cclxuICAgIC8vIGNhcmRzIHNlY3Rpb25cclxuICAgIGNvbnN0IGluaXRpYWxDYXJkcyA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7XHJcbiAgICAgICAgZGF0YTogY2FyZHNSZXNwb25zZSxcclxuICAgICAgICByZW5kZXJlcjogKHRoaXNDYXJkKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBjYXJkID0gbWFrZU5ld0NhcmQoXHJcbiAgICAgICAgICAgIHRoaXNDYXJkLFxyXG4gICAgICAgICAgICBjb25zdHMuY2FyZFRlbXBsYXRlLFxyXG4gICAgICAgICAgICBoYW5kbGVDYXJkQ2xpY2tcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBpbml0aWFsQ2FyZHMuYWRkSXRlbShjYXJkKTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBjb25zdHMuY2FyZENvbnRhaW5lciAvLyB0aGUgY29udGFpbmVyIHRoYXQgdGhlIGNhcmRzIGFyZSBwdXQgaW50b1xyXG4gICAgKTtcclxuICAgIGluaXRpYWxDYXJkcy5yZW5kZXJFbGVtZW50cygpO1xyXG5cclxuICAgIGNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICAgICBjb25zdHMuYWRkQ2FyZFBvcHVwRWxlbWVudCxcclxuICAgICAgKHZhbHVlc1Bhc3NlZEluKSA9PiB7XHJcbiAgICAgICAgLy8gZmlyc3QgY2FsbGJhY2sgfCB2YWx1ZXNQYXNzZWRJbiBpcyBhbiBvYmplY3QgdGhhdCBjb21lcyBmcm9tIHRoZSBfZ2V0SW5wdXRWYWx1ZXMoKSByZXR1cm4gaW4gUG9wdXBXaXRoRm9ybVxyXG4gICAgICAgIHV0aWxzLnJlbmRlckxvYWRpbmcodHJ1ZSwgY29uc3RzLmFkZENhcmRQb3B1cEZvcm0pO1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLmFkZE5ld0NhcmQoe1xyXG4gICAgICAgICAgICBuYW1lOiB2YWx1ZXNQYXNzZWRJbi5jYXJkVGl0bGUsXHJcbiAgICAgICAgICAgIGxpbms6IHZhbHVlc1Bhc3NlZEluLmNhcmRVUkwsXHJcbiAgICAgICAgICB9KSAvLyB1cGRhdGVzIHNlcnZlciB3aXRoIG5ldyBjYXJkXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBtYWtlTmV3Q2FyZChyZXMsIGNvbnN0cy5jYXJkVGVtcGxhdGUsIGhhbmRsZUNhcmRDbGljayk7XHJcbiAgICAgICAgICAgIGluaXRpYWxDYXJkcy5hZGROZXdJdGVtKGNhcmQpOyAvLyBhZGQgaXQgdG8gdGhlIERPTVxyXG4gICAgICAgICAgICB1dGlscy5yZW5kZXJMb2FkaW5nKGZhbHNlLCBjb25zdHMuYWRkQ2FyZFBvcHVwRm9ybSk7XHJcbiAgICAgICAgICAgIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgocmVzKSA9PiBjb25zb2xlLmxvZyhyZXMpKTtcclxuICAgICAgfSxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIC8vIHRoZSBmb3JtIE9QRU4gY2FsbGJhY2tcclxuICAgICAgICBjb25zdHMuYWRkQ2FyZFBvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0cy5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBhZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICBjb25zdCBkZWxldGVDYXJkUG9wdXAgPSBuZXcgUG9wdXBEZWxldGVDYXJkKFxyXG4gICAgICBjb25zdHMuZGVsZXRlQ2FyZFBvcHVwRWxlbWVudCxcclxuICAgICAgKGlkLCBjYXJkKSA9PiB7XHJcbiAgICAgICAgLy8gY2IgfCBkbyB0aGlzIHdoZW4gZGVsZXRlIGJ1dHRvbiBpcyBjbGlja2VkIHwgdmFsdWVzIHJlY2VpdmVkIGJ5IF9oYW5kbGVTdWJtaXQgaW4gcG9wdXBEZWxldGVDYXJkXHJcbiAgICAgICAgdXRpbHMucmVuZGVyTG9hZGluZyh0cnVlLCBjb25zdHMuZGVsZXRlQ2FyZFBvcHVwRm9ybSk7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAuZGVsZXRlQ2FyZChpZClcclxuICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdXRpbHMucmVuZGVyTG9hZGluZyhmYWxzZSwgY29uc3RzLmRlbGV0ZUNhcmRQb3B1cEZvcm0pO1xyXG4gICAgICAgICAgICBjYXJkLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKHJlcykgPT4gY29uc29sZS5sb2cocmVzKSk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKHJlcykgPT4gY29uc29sZS5sb2cocmVzKSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=